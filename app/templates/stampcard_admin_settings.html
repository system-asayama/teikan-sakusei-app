{% extends "base.html" %}

{% block title %}ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰è¨­å®š - {{ store_name }}{% endblock %}

{% block content %}
<div class="container">
  <div class="header">
    <h1>ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰è¨­å®š</h1>
    <p class="store-name">{{ store_name }}</p>
  </div>
  
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  
  <div class="settings-card">
    <form method="POST" action="{{ url_for('stampcard_admin.settings', store_id=store_id) }}">
      <div class="form-group">
        <label for="card_title">ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«</label>
        <input type="text" id="card_title" name="card_title" 
               value="{{ settings.card_title }}" required>
        <small>é¡§å®¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«</small>
      </div>
      
      <div class="form-group">
        <label for="required_stamps">å¿…è¦ã‚¹ã‚¿ãƒ³ãƒ—æ•°</label>
        <input type="number" id="required_stamps" name="required_stamps" 
               value="{{ settings.required_stamps }}" min="1" max="50" required>
        <small>ç‰¹å…¸ã‚’ç²å¾—ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚¹ã‚¿ãƒ³ãƒ—ã®æ•°</small>
      </div>
      
      <div class="form-group">
        <label for="reward_description">ç‰¹å…¸å†…å®¹</label>
        <textarea id="reward_description" name="reward_description" 
                  rows="3" required>{{ settings.reward_description }}</textarea>
        <small>ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é›†ã‚ãŸé¡§å®¢ãŒç²å¾—ã§ãã‚‹ç‰¹å…¸ã®èª¬æ˜</small>
      </div>
      
      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" name="enabled" 
                 {% if settings.enabled %}checked{% endif %}>
          ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹
        </label>
        <small>ç„¡åŠ¹ã«ã™ã‚‹ã¨ã€é¡§å®¢ã¯ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã§ããªããªã‚Šã¾ã™</small>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">è¨­å®šã‚’ä¿å­˜</button>
        <a href="{{ url_for('admin.store_apps', store_id=store_id) }}" class="btn btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
      </div>
    </form>
  </div>
  
  <div class="info-card">
    <h3>ğŸ’¡ ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹</h3>
    <ol>
      <li><strong>è¨­å®šã‚’ä¿å­˜</strong>: å¿…è¦ã‚¹ã‚¿ãƒ³ãƒ—æ•°ã¨ç‰¹å…¸å†…å®¹ã‚’è¨­å®šã—ã¾ã™</li>
      <li><strong>QRã‚³ãƒ¼ãƒ‰ã‚’è¨­ç½®</strong>: åº—èˆ—ã«QRã‚³ãƒ¼ãƒ‰ã‚’è¨­ç½®ã—ã¾ã™</li>
      <li><strong>é¡§å®¢ãŒç™»éŒ²</strong>: é¡§å®¢ãŒã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™</li>
      <li><strong>ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ä¸</strong>: é¡§å®¢ãŒQRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ç²å¾—ã—ã¾ã™</li>
      <li><strong>ç‰¹å…¸åˆ©ç”¨</strong>: ã‚¹ã‚¿ãƒ³ãƒ—ãŒè²¯ã¾ã£ãŸã‚‰ç‰¹å…¸ã‚’åˆ©ç”¨ã§ãã¾ã™</li>
    </ol>
  </div>
  
  <div class="back-link">
    <a href="{{ url_for('admin.store_apps', store_id=store_id) }}">&larr; ã‚¢ãƒ—ãƒªä¸€è¦§ã«æˆ»ã‚‹</a>
  </div>
</div>

<style>
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .header {
    text-align: center;
    margin-bottom: 32px;
  }
  
  h1 {
    color: #333;
    margin-bottom: 8px;
    font-size: 28px;
  }
  
  .store-name {
    color: #666;
    font-size: 18px;
  }
  
  .alert {
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 20px;
  }
  
  .alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }
  
  .alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }
  
  .settings-card {
    background: white;
    border-radius: 12px;
    padding: 32px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 24px;
  }
  
  .form-group {
    margin-bottom: 24px;
  }
  
  label {
    display: block;
    margin-bottom: 8px;
    color: #333;
    font-weight: 600;
    font-size: 15px;
  }
  
  input[type="text"],
  input[type="number"],
  textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 15px;
    box-sizing: border-box;
    font-family: inherit;
  }
  
  input:focus,
  textarea:focus {
    outline: none;
    border-color: #4CAF50;
  }
  
  textarea {
    resize: vertical;
  }
  
  small {
    display: block;
    margin-top: 6px;
    color: #666;
    font-size: 13px;
  }
  
  .checkbox-group label {
    display: flex;
    align-items: center;
    font-weight: 500;
  }
  
  .checkbox-group input[type="checkbox"] {
    width: auto;
    margin-right: 8px;
  }
  
  .form-actions {
    display: flex;
    gap: 12px;
    margin-top: 32px;
  }
  
  .btn {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    transition: all 0.2s ease;
  }
  
  .btn-primary {
    background: #4CAF50;
    color: white;
  }
  
  .btn-primary:hover {
    background: #45a049;
  }
  
  .btn-secondary {
    background: #e0e0e0;
    color: #333;
  }
  
  .btn-secondary:hover {
    background: #d0d0d0;
  }
  
  .info-card {
    background: #e3f2fd;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 24px;
  }
  
  .info-card h3 {
    color: #1976d2;
    margin-bottom: 16px;
    font-size: 18px;
  }
  
  .info-card ol {
    margin: 0;
    padding-left: 24px;
    color: #1976d2;
  }
  
  .info-card li {
    margin-bottom: 8px;
    line-height: 1.6;
  }
  
  .back-link {
    text-align: center;
  }
  
  .back-link a {
    color: #2196F3;
    text-decoration: none;
    font-weight: 500;
  }
  
  .back-link a:hover {
    text-decoration: underline;
  }
  
  @media (max-width: 768px) {
    .container {
      padding: 16px;
    }
    
    .settings-card {
      padding: 24px;
    }
    
    .form-actions {
      flex-direction: column;
    }
  }
</style>
{% endblock %}
