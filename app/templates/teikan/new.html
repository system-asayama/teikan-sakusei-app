{% extends "base.html" %}

{% block title %}定款新規作成 - 定款作成システム{% endblock %}

{% block content %}
<div class="container">
  <h1>定款新規作成</h1>
  
  {% if error %}
  <div class="error">{{ error }}</div>
  {% endif %}
  
  <form method="POST" action="{{ url_for('teikan.new') }}">
    <input type="hidden" name="csrf_token" value="{{ get_csrf() }}">
    
    <!-- 基本情報 -->
    <section class="form-section">
      <h2>基本情報</h2>
      
      <div class="form-group">
        <label for="会社名">会社名 <span class="required">*</span></label>
        <input type="text" id="会社名" name="会社名" required 
               placeholder="例: 株式会社サンプル">
      </div>
      
      <div class="form-group">
        <label for="会社名_英語">会社名（英語）</label>
        <input type="text" id="会社名_英語" name="会社名_英語" 
               placeholder="例: Sample Corporation">
      </div>
      
      <div class="form-group">
        <label for="本店所在地_都道府県">本店所在地（都道府県） <span class="required">*</span></label>
        <input type="text" id="本店所在地_都道府県" name="本店所在地_都道府県" required 
               placeholder="例: 東京都">
      </div>
      
      <div class="form-group">
        <label for="本店所在地_市区町村">本店所在地（市区町村） <span class="required">*</span></label>
        <input type="text" id="本店所在地_市区町村" name="本店所在地_市区町村" required 
               placeholder="例: 渋谷区">
      </div>
      
      <div class="form-group">
        <label for="本店所在地_番地">本店所在地（番地） <span class="required">*</span></label>
        <input type="text" id="本店所在地_番地" name="本店所在地_番地" required 
               placeholder="例: 渋谷1-1-1">
      </div>
      
      <div class="form-group">
        <label for="本店所在地_建物名">本店所在地（建物名）</label>
        <input type="text" id="本店所在地_建物名" name="本店所在地_建物名" 
               placeholder="例: サンプルビル5階">
      </div>
      
      <div class="form-group">
        <label for="事業年度_決算月">事業年度（決算月） <span class="required">*</span></label>
        <select id="事業年度_決算月" name="事業年度_決算月" required>
          <option value="">選択してください</option>
          <option value="1">1月</option>
          <option value="2">2月</option>
          <option value="3">3月</option>
          <option value="4">4月</option>
          <option value="5">5月</option>
          <option value="6">6月</option>
          <option value="7">7月</option>
          <option value="8">8月</option>
          <option value="9">9月</option>
          <option value="10">10月</option>
          <option value="11">11月</option>
          <option value="12">12月</option>
        </select>
      </div>
    </section>
    
    <!-- 事業目的 -->
    <section class="form-section">
      <h2>事業目的</h2>
      <p class="help-text">会社が行う事業の内容を入力してください（最低1つ、最大20個）</p>
      
      <div id="事業目的_container">
        <div class="form-group">
          <label for="事業目的_1">事業目的 1 <span class="required">*</span></label>
          <input type="text" id="事業目的_1" name="事業目的_1" required 
                 placeholder="例: ソフトウェアの開発、販売及び保守">
        </div>
        
        <div class="form-group">
          <label for="事業目的_2">事業目的 2</label>
          <input type="text" id="事業目的_2" name="事業目的_2" 
                 placeholder="例: インターネットを利用した各種情報提供サービス">
        </div>
        
        <div class="form-group">
          <label for="事業目的_3">事業目的 3</label>
          <input type="text" id="事業目的_3" name="事業目的_3">
        </div>
      </div>
      
      <button type="button" class="btn btn-secondary" onclick="add事業目的()">事業目的を追加</button>
    </section>
    
    <!-- 資本金・株式 -->
    <section class="form-section">
      <h2>資本金・株式</h2>
      
      <div class="form-group">
        <label for="発行可能株式総数">発行可能株式総数 <span class="required">*</span></label>
        <input type="number" id="発行可能株式総数" name="発行可能株式総数" required min="1" 
               placeholder="例: 10000">
      </div>
      
      <div class="form-group">
        <label for="設立時発行株式数">設立時発行株式数 <span class="required">*</span></label>
        <input type="number" id="設立時発行株式数" name="設立時発行株式数" required min="1" 
               placeholder="例: 1000">
      </div>
      
      <div class="form-group">
        <label for="一株の金額">1株の金額（円） <span class="required">*</span></label>
        <input type="number" id="一株の金額" name="一株の金額" required min="1" 
               placeholder="例: 10000">
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" name="譲渡制限" checked>
          株式の譲渡制限を設ける
        </label>
        <p class="help-text">※ 中小企業の場合、通常は譲渡制限を設けます</p>
      </div>
      
      <div class="form-group">
        <label for="承認機関">譲渡承認機関</label>
        <select id="承認機関" name="承認機関">
          <option value="株主総会" selected>株主総会</option>
          <option value="取締役会">取締役会</option>
        </select>
      </div>
    </section>
    
    <!-- 機関設計 -->
    <section class="form-section">
      <h2>機関設計</h2>
      
      <div class="form-group">
        <label for="取締役の人数">取締役の人数 <span class="required">*</span></label>
        <input type="number" id="取締役の人数" name="取締役の人数" required min="1" value="1">
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" name="取締役会設置">
          取締役会を設置する
        </label>
        <p class="help-text">※ 取締役会を設置する場合は取締役3名以上が必要です</p>
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" name="監査役設置">
          監査役を設置する
        </label>
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" name="会計参与設置">
          会計参与を設置する
        </label>
      </div>
    </section>
    
    <!-- 発起人情報 -->
    <section class="form-section">
      <h2>発起人情報</h2>
      <p class="help-text">会社設立時の出資者情報を入力してください（最低1名）</p>
      
      <div id="発起人_container">
        <div class="promoter-group">
          <h3>発起人 1</h3>
          <div class="form-group">
            <label for="発起人_氏名_1">氏名 <span class="required">*</span></label>
            <input type="text" id="発起人_氏名_1" name="発起人_氏名_1" required 
                   placeholder="例: 山田太郎">
          </div>
          
          <div class="form-group">
            <label for="発起人_住所_1">住所 <span class="required">*</span></label>
            <input type="text" id="発起人_住所_1" name="発起人_住所_1" required 
                   placeholder="例: 東京都渋谷区渋谷1-1-1">
          </div>
          
          <div class="form-group">
            <label for="発起人_引受株式数_1">引受株式数 <span class="required">*</span></label>
            <input type="number" id="発起人_引受株式数_1" name="発起人_引受株式数_1" required min="1" 
                   placeholder="例: 1000">
          </div>
        </div>
      </div>
      
      <button type="button" class="btn btn-secondary" onclick="add発起人()">発起人を追加</button>
    </section>
    
    <!-- 公告方法 -->
    <section class="form-section">
      <h2>公告方法</h2>
      
      <div class="form-group">
        <label for="公告方法">公告方法</label>
        <select id="公告方法" name="公告方法">
          <option value="官報" selected>官報に掲載する方法</option>
          <option value="日刊新聞紙">日刊新聞紙に掲載する方法</option>
          <option value="電子公告">電子公告</option>
        </select>
      </div>
    </section>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">定款を作成</button>
      <a href="{{ url_for('teikan.index') }}" class="btn btn-secondary">キャンセル</a>
    </div>
  </form>
</div>

<script>
let 事業目的_count = 3;
let 発起人_count = 1;

function add事業目的() {
  if (事業目的_count >= 20) {
    alert('事業目的は最大20個まで登録できます。');
    return;
  }
  
  事業目的_count++;
  const container = document.getElementById('事業目的_container');
  const div = document.createElement('div');
  div.className = 'form-group';
  div.innerHTML = `
    <label for="事業目的_${事業目的_count}">事業目的 ${事業目的_count}</label>
    <input type="text" id="事業目的_${事業目的_count}" name="事業目的_${事業目的_count}">
  `;
  container.appendChild(div);
}

function add発起人() {
  if (発起人_count >= 10) {
    alert('発起人は最大10名まで登録できます。');
    return;
  }
  
  発起人_count++;
  const container = document.getElementById('発起人_container');
  const div = document.createElement('div');
  div.className = 'promoter-group';
  div.innerHTML = `
    <h3>発起人 ${発起人_count}</h3>
    <div class="form-group">
      <label for="発起人_氏名_${発起人_count}">氏名</label>
      <input type="text" id="発起人_氏名_${発起人_count}" name="発起人_氏名_${発起人_count}">
    </div>
    
    <div class="form-group">
      <label for="発起人_住所_${発起人_count}">住所</label>
      <input type="text" id="発起人_住所_${発起人_count}" name="発起人_住所_${発起人_count}">
    </div>
    
    <div class="form-group">
      <label for="発起人_引受株式数_${発起人_count}">引受株式数</label>
      <input type="number" id="発起人_引受株式数_${発起人_count}" name="発起人_引受株式数_${発起人_count}" min="1">
    </div>
  `;
  container.appendChild(div);
}
</script>

<style>
.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.form-section {
  background: white;
  padding: 20px;
  margin-bottom: 20px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.form-section h2 {
  margin-top: 0;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid #007bff;
}

.form-section h3 {
  margin-top: 20px;
  margin-bottom: 10px;
  font-size: 16px;
  color: #333;
}

.form-group {
  margin-bottom: 15px;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.form-group input[type="checkbox"] {
  margin-right: 5px;
}

.required {
  color: red;
}

.help-text {
  font-size: 12px;
  color: #666;
  margin-top: 5px;
}

.promoter-group {
  background: #f8f9fa;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 4px;
}

.form-actions {
  margin-top: 30px;
  text-align: center;
}

.btn {
  display: inline-block;
  padding: 10px 20px;
  margin: 0 5px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  text-decoration: none;
  font-size: 14px;
}

.btn-primary {
  background-color: #007bff;
  color: white;
}

.btn-primary:hover {
  background-color: #0056b3;
}

.btn-secondary {
  background-color: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background-color: #545b62;
}

.error {
  background-color: #f8d7da;
  color: #721c24;
  padding: 12px;
  border-radius: 4px;
  margin-bottom: 20px;
  border: 1px solid #f5c6cb;
}
</style>
{% endblock %}
