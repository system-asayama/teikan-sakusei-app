{% extends "base.html" %}
{% block title %}ユーザー編集 - システム管理者{% endblock %}
{% block content %}
<div class="container" style="max-width:600px; margin:50px auto; padding:20px;">
    <h2>ユーザー編集</h2>
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ get_csrf() }}">
        <div class="form-group">
            <label for="login_id">ログインID *</label>
            <input type="text" class="form-control" id="login_id" name="login_id" value="{{ user.login_id }}" required>
        </div>
        <div class="form-group">
            <label for="name">氏名 *</label>
            <input type="text" class="form-control" id="name" name="name" value="{{ user.name }}" required>
        </div>
        <div class="form-group">
            <label for="email">メールアドレス</label>
            <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}">
        </div>
        <div class="form-group">
            <label for="role">ロール *</label>
            <select class="form-control" id="role" name="role" required>
                <option value="{{ roles.SYSTEM_ADMIN }}" {% if user.role == roles.SYSTEM_ADMIN %}selected{% endif %}>SYSTEM_ADMIN</option>
                <option value="{{ roles.TENANT_ADMIN }}" {% if user.role == roles.TENANT_ADMIN %}selected{% endif %}>TENANT_ADMIN</option>
                <option value="{{ roles.ADMIN }}" {% if user.role == roles.ADMIN %}selected{% endif %}>ADMIN</option>
                <option value="{{ roles.EMPLOYEE }}" {% if user.role == roles.EMPLOYEE %}selected{% endif %}>EMPLOYEE</option>
            </select>
        </div>
        <div class="form-group">
            <label for="tenant_id">テナント</label>
            <select class="form-control" id="tenant_id" name="tenant_id">
                <option value="">なし</option>
                {% for t in tenants %}
                <option value="{{ t.id }}" {% if user.tenant_id == t.id %}selected{% endif %}>{{ t['名称'] }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="active" name="active" {% if user.active %}checked{% endif %}>
            <label class="form-check-label" for="active">有効</label>
        </div>
        <div style="margin-top:20px;">
            <button type="submit" class="btn btn-primary">更新</button>
            <a href="{{ url_for('system_admin.user_detail', uid=user.id) }}" class="btn btn-secondary">キャンセル</a>
        </div>
    </form>
</div>
{% endblock %}
