# 定款作成アプリ 要件定義書

## 概要
会社設立時に必要な定款を、必要事項を入力するだけで自動生成できるWebアプリケーション

## 対象会社形態
- **株式会社** (最初のリリース対象)
- 合同会社 (将来対応)
- その他法人形態 (将来対応)

## 主要機能

### 1. 定款作成機能
必要事項を入力フォームに入力すると、標準的な定款が自動生成される

#### 入力項目（株式会社）

##### 基本情報
- **会社名**: 商号（例: 株式会社サンプル）
- **会社名（英語）**: 英語表記（任意）
- **本店所在地**: 都道府県、市区町村、番地、建物名
- **事業年度**: 決算月（1-12月）

##### 目的（事業内容）
- **事業目的**: 複数登録可能（最低1つ、最大20個程度）
  - 例: 「ソフトウェアの開発、販売及び保守」
  - 例: 「インターネットを利用した各種情報提供サービス」
  - 最後に「前各号に附帯関連する一切の業務」を自動追加

##### 資本金・株式
- **発行可能株式総数**: 数値（例: 10000）
- **設立時発行株式数**: 数値（例: 1000）
- **1株の金額**: 数値（例: 10000）円
- **資本金**: 自動計算（設立時発行株式数 × 1株の金額）

##### 株式譲渡制限
- **譲渡制限の有無**: あり/なし（デフォルト: あり）
- **承認機関**: 株主総会/取締役会（デフォルト: 株主総会）

##### 機関設計
- **取締役の人数**: 1名以上（例: 1名、3名）
- **取締役会の設置**: あり/なし（デフォルト: なし）
- **監査役の設置**: あり/なし（デフォルト: なし）
- **会計参与の設置**: あり/なし（デフォルト: なし）

##### 発起人情報
- **発起人**: 複数登録可能（最低1名）
  - 氏名
  - 住所
  - 引受株式数
  - 出資金額（自動計算）

##### 公告方法
- **公告方法**: 選択式
  - 官報に掲載する方法（デフォルト）
  - 日刊新聞紙に掲載する方法
  - 電子公告

### 2. 定款管理機能

#### 定款一覧
- 作成した定款の一覧表示
- 表示項目: 会社名、作成日時、最終更新日時、ステータス
- ソート: 作成日時（降順）
- ページネーション: 20件/ページ

#### 定款詳細表示
- 入力した全項目の表示
- 生成された定款本文のプレビュー

#### 定款編集
- 作成済み定款の編集
- 入力項目の変更
- 定款本文の再生成

#### 定款削除
- 作成済み定款の削除
- 削除確認ダイアログ

### 3. 定款出力機能

#### PDF出力
- 定款本文をPDF形式で出力
- A4サイズ、縦書き
- フォント: 明朝体
- ファイル名: `定款_{会社名}_{作成日}.pdf`

#### Word出力（将来対応）
- 定款本文をWord形式で出力

### 4. マルチテナント対応
- テナントごとにデータを分離
- システム管理者: 全テナントの定款を閲覧可能
- 管理者: 自分のテナントの定款のみ閲覧・編集可能

## データベース設計

### T_定款 (定款マスタ)
| カラム名 | 型 | 説明 |
|---------|-----|------|
| id | INTEGER | 主キー |
| tenant_id | INTEGER | テナントID |
| created_by | INTEGER | 作成者ID (T_管理者.id) |
| 会社名 | TEXT | 商号 |
| 会社名_英語 | TEXT | 英語表記（任意） |
| 本店所在地_都道府県 | TEXT | 都道府県 |
| 本店所在地_市区町村 | TEXT | 市区町村 |
| 本店所在地_番地 | TEXT | 番地 |
| 本店所在地_建物名 | TEXT | 建物名（任意） |
| 事業年度_決算月 | INTEGER | 決算月 (1-12) |
| 発行可能株式総数 | INTEGER | 発行可能株式総数 |
| 設立時発行株式数 | INTEGER | 設立時発行株式数 |
| 一株の金額 | INTEGER | 1株の金額（円） |
| 資本金 | INTEGER | 資本金（円、自動計算） |
| 譲渡制限 | INTEGER | 譲渡制限の有無 (1=あり, 0=なし) |
| 承認機関 | TEXT | 承認機関 (株主総会/取締役会) |
| 取締役の人数 | INTEGER | 取締役の人数 |
| 取締役会設置 | INTEGER | 取締役会の設置 (1=あり, 0=なし) |
| 監査役設置 | INTEGER | 監査役の設置 (1=あり, 0=なし) |
| 会計参与設置 | INTEGER | 会計参与の設置 (1=あり, 0=なし) |
| 公告方法 | TEXT | 公告方法 |
| ステータス | TEXT | ステータス (draft/completed) |
| created_at | TIMESTAMP | 作成日時 |
| updated_at | TIMESTAMP | 更新日時 |

### T_事業目的 (事業目的)
| カラム名 | 型 | 説明 |
|---------|-----|------|
| id | INTEGER | 主キー |
| 定款_id | INTEGER | 定款ID (T_定款.id) |
| 順序 | INTEGER | 表示順序 |
| 目的 | TEXT | 事業目的 |
| created_at | TIMESTAMP | 作成日時 |

### T_発起人 (発起人情報)
| カラム名 | 型 | 説明 |
|---------|-----|------|
| id | INTEGER | 主キー |
| 定款_id | INTEGER | 定款ID (T_定款.id) |
| 氏名 | TEXT | 氏名 |
| 住所 | TEXT | 住所 |
| 引受株式数 | INTEGER | 引受株式数 |
| 出資金額 | INTEGER | 出資金額（円、自動計算） |
| created_at | TIMESTAMP | 作成日時 |

## 定款テンプレート

### 基本構成
1. **第1章 総則**
   - 第1条 (商号)
   - 第2条 (目的)
   - 第3条 (本店の所在地)
   - 第4条 (公告方法)

2. **第2章 株式**
   - 第5条 (発行可能株式総数)
   - 第6条 (株式の譲渡制限)

3. **第3章 株主総会**
   - 第7条 (招集)
   - 第8条 (議長)
   - 第9条 (決議の方法)

4. **第4章 取締役及び代表取締役**
   - 第10条 (取締役の員数)
   - 第11条 (取締役の選任)
   - 第12条 (取締役の任期)
   - 第13条 (代表取締役)

5. **第5章 計算**
   - 第14条 (事業年度)
   - 第15条 (剰余金の配当)

6. **附則**
   - 第1条 (設立に際して出資される財産の価額)
   - 第2条 (最初の事業年度)
   - 第3条 (発起人の氏名、住所及び引受株式数)
   - 第4条 (設立時取締役)

## 画面設計

### 1. ダッシュボード
- ログイン後のトップページ
- 定款一覧へのリンク
- 新規定款作成ボタン

### 2. 定款一覧画面
- 作成済み定款のリスト表示
- 検索・フィルタ機能
- 新規作成ボタン

### 3. 定款作成画面（ステップ形式）
- **ステップ1: 基本情報**
- **ステップ2: 事業目的**
- **ステップ3: 資本金・株式**
- **ステップ4: 機関設計**
- **ステップ5: 発起人情報**
- **ステップ6: 確認・完了**

### 4. 定款詳細画面
- 入力内容の表示
- 定款本文のプレビュー
- PDF出力ボタン
- 編集ボタン
- 削除ボタン

### 5. 定款編集画面
- 作成画面と同じフォーム
- 既存データの読み込み
- 更新ボタン

## 技術スタック

### バックエンド
- Python 3.11
- Flask 3.0
- SQLAlchemy 2.0
- psycopg2-binary (PostgreSQL)
- sqlite3 (開発環境)

### PDF生成
- ReportLab または WeasyPrint

### フロントエンド
- HTML5
- CSS3 (シンプルなスタイル)
- JavaScript (バニラJS、必要最小限)

## 開発優先順位

### Phase 1 (MVP)
1. ✅ ログイン機能（完了）
2. データベーススキーマ作成
3. 定款作成フォーム（シンプル版、1ページ）
4. 定款テンプレート生成
5. 定款一覧・詳細表示
6. PDF出力

### Phase 2
7. ステップ形式のフォーム
8. 定款編集機能
9. バリデーション強化
10. UI/UX改善

### Phase 3
11. Word出力
12. テンプレートカスタマイズ
13. 他の法人形態対応
14. 履歴管理

## 非機能要件

### セキュリティ
- ✅ ログイン認証
- ✅ CSRF保護
- ✅ セッション管理
- テナント間データ分離

### パフォーマンス
- ページ読み込み: 2秒以内
- PDF生成: 5秒以内

### 可用性
- Herokuでのデプロイ
- PostgreSQL使用

### 保守性
- コードの可読性
- コメント・ドキュメント
- テストコード（将来対応）
